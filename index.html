<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <title>Armhävningar – JJ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <div id="profileGate" class="profile-gate" hidden>
      <div class="profile-gate__panel">
        <h1 class="profile-gate__title">Välj profil</h1>
        <p class="profile-gate__text">
          För att visa din statistik behöver du ange namnet på din profil eller skapa en ny.
        </p>

        <div class="profile-gate__section">
          <h2 class="profile-gate__section-title">Anslut till befintlig profil</h2>
          <form id="profileGateExistingForm" class="profile-gate__form">
            <input
              type="text"
              id="profileGateExistingInput"
              placeholder="Profilnamn"
              autocomplete="name"
              required
            />
            <button type="submit">Fortsätt</button>
          </form>
          <div id="profileGateExistingStatus" class="status-message"></div>
        </div>

        <div class="profile-gate__divider" role="presentation"><span>eller</span></div>

        <div class="profile-gate__section">
          <h2 class="profile-gate__section-title">Skapa ny profil</h2>
          <form id="profileGateCreateForm" class="profile-gate__form">
            <input
              type="text"
              id="profileGateCreateNameInput"
              placeholder="Namn"
              autocomplete="name"
              required
            />
            <input
              type="number"
              id="profileGateCreateGoalInput"
              min="1"
              step="1"
              placeholder="Mål (totalt)"
              required
            />
            <input type="date" id="profileGateCreateDateInput" required />
            <button type="submit">Skapa profil</button>
          </form>
          <div id="profileGateCreateStatus" class="status-message"></div>
        </div>
      </div>
    </div>
    <div class="app">
      <header>
        <div>
          <div class="title">Armhävningar</div>
          <div class="subtitle">Användare: <span id="activeUserName">–</span></div>
        </div>
        <div class="chip" id="goalChip">Mål: –</div>
      </header>

      <nav class="tab-bar">
        <button type="button" class="tab-button tab-button-active" data-view="dashboard">
          Översikt
        </button>
        <button type="button" class="tab-button" data-view="settings">Inställningar</button>
      </nav>

      <div id="dashboardView" class="view view-active">
        <div class="card">
          <div class="card-header">
            <div class="card-title">Totalt antal armhävningar registrerade</div>
            <div id="totalYear" class="card-value">0</div>
          </div>
          <div class="progress-bar">
            <div id="progressBarInner" class="progress-bar-inner"></div>
          </div>
          <div class="card-footnote" id="goalText">0 av – (0&nbsp;%)</div>
        </div>

        <div class="stats-grid">
          <div class="small-card">
            <div class="small-row">
              <div class="small-text">
                <div class="small-label">Dagar kvar</div>
                <div class="small-footnote">Till <span id="targetDateLabel">–</span></div>
              </div>
              <div id="daysLeft" class="small-value">–</div>
            </div>
          </div>
          <div class="small-card">
            <div class="small-row">
              <div class="small-text">
                <div class="small-label">Behövs per dag</div>
                <div class="small-footnote">För att nå <span id="goalLabel">–</span></div>
              </div>
              <div id="perDayNeeded" class="small-value">–</div>
            </div>
          </div>
        </div>

        <div class="card card-main">
          <div class="card-header">
            <div class="card-title card-main-title">Registrera pass</div>
          </div>
          <form id="entryForm">
            <input
              type="number"
              id="countInput"
              min="1"
              step="1"
              inputmode="numeric"
              placeholder="Antal armhävningar"
              required
            />
            <input type="date" id="dateInput" required />
            <button type="submit">Spara</button>
          </form>
          <div id="error" class="error"></div>
        </div>

        <div class="card chart-card">
          <div class="card-header">
            <div class="card-title">Utveckling</div>
          </div>
          <div class="card-footnote">Dagliga totalsummor för detta år.</div>
          <canvas id="pushupChart" height="220"></canvas>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">Historik</div>
          </div>
          <div class="card-footnote">
            Alla registrerade pass för <span id="historyUserName">–</span> (senaste först).
          </div>
          <div id="entriesList" class="entries-list"></div>
        </div>
      </div>

      <div id="settingsView" class="view" hidden>
        <div class="card">
          <div class="card-header">
            <div class="card-title">Aktiv profil</div>
          </div>
          <form id="profileLookupForm">
            <input
              type="text"
              id="profileLookupInput"
              placeholder="Ange profilnamn"
              autocomplete="name"
              required
            />
            <button type="submit">Byt profil</button>
          </form>
          <div id="profileLookupStatus" class="status-message"></div>
          <div class="hint">Skriv namnet exakt som när profilen skapades.</div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">Skapa profil</div>
          </div>
          <form id="createProfileForm">
            <input type="text" id="profileNameInput" placeholder="Namn" autocomplete="name" required />
            <input
              type="number"
              id="profileGoalInput"
              min="1"
              step="1"
              placeholder="Mål (totalt)"
              required
            />
            <input type="date" id="profileDateInput" required />
            <button type="submit">Skapa profil</button>
          </form>
          <div class="hint">Namn används för att koppla registrerade pass till profilen.</div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">Uppdatera mål</div>
          </div>
          <form id="updateProfileForm">
            <input
              type="number"
              id="updateGoalInput"
              min="1"
              step="1"
              placeholder="Nytt mål (totalt)"
              required
            />
            <input type="date" id="updateDateInput" required />
            <button type="submit">Spara ändringar</button>
          </form>
          <div id="updateProfileHint" class="hint"></div>
          <div id="settingsStatus" class="status-message"></div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
